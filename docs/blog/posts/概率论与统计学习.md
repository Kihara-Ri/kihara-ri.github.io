---
title: 概率论与统计学习 
date: 2023-12-12
tags: 
  - 概率 
  - 统计
  - 数学
categories: 
  - Math
---
## 概率

概率论，真让人头疼

<!-- more -->

### 如何理解概率空间

首先要理解联合概率、边缘概率和条件概率这三个概念

我们要明白上帝视角和普通人视角是不同的

**分析蒙提霍尔问题**

我们假设正确的门为$X$，挑战者选择的门为$Y$，主持人打开的门为$Z$，$X, Y, Z$均为随机变量，且值可能为1，2，3

实际上我们只需要分析挑战者坚持原来的选择中的一种具体情况获胜的概率即可

现在我们假设挑战者选择了门3，主持人打开了门1，并且门3是正确答案（在这种情况下挑战者坚持了正确的答案，但他本人并不知道）

即
$$
P(X=3|Y=3,Z=1)
$$
我们对上式进行变换以便求值
$$
P(X=3|Y=3,Z=1)=\frac{P(X=3,Y=3,Z=1)}{P(Y=3,Z=1)}\\
=\frac{P(X=3,Y=3,Z=1)}{P(X=1,Y=3,Z=1)+P(X=2,Y=3,Z=1)+P(X=3,Y=3,Z=1)}
$$
现在我们仅看分母中的一项
$$
P(X=1,Y=3,Z=1)=P(Z=1|X=1,Y=3)P(Y=3|X=1)P(X=1)
$$
由于$X$为随机变量，我们可以认为是掷骰子决定的，因此有
$$
P(X=1)=P(X=2)=P(X=3)=\frac{1}{3}
$$
同样，$Y$也是独立于$X$的随机变量
$$
P(Y=3|X=1)=P(Y=3|X=2)=P(Y=3|X=3)=\frac{1}{3}
$$
而主持人打开的门$Z$并不是一个随机变量，而是受到$X$的约束，好在现在我们将$Z$的取值约束在$Z=1$了，这样可以很方便地进行分析概率：

- 因为主持人不可能打开正确的门，$P(Z=1|X=1,Y=3)=0$

- 另一扇门是正确的门，所以只能打开某一扇门，$P(Z=1|X=2,Y=3)=1$
- 剩下两扇门都不是正确的门，可以在两扇门中随机选择，$P(Z=1|X=3,Y=3)=\frac{1}{2}$

有了上面的概率值，我们可以求得
$$
P(X=3|Y=3,Z=1)=\frac{1/18}{0+1/9+1/18}=\frac{1}{3}
$$
由此可见，挑战者在坚持选择时能够选中正确的门的概率为$\frac{1}{3}$，相反改选另一扇门有更高的正确率

```ruby
#!/usr/bin/ruby -s
# -*- coding: euc-jp -*-
# -*- Ruby -*-

def usage
  name = File::basename $0
  print <<EOU
#{name}: モンティホール問題をシミュレート
(例)
  #{name} 10  → 10 回試行
(オプション例)
  -c         または -change   → ヤギを見て扉を変える
  -s=777     または -seed=777 → 乱数の種を指定
  -help      または -h        → このメッセージを表示
EOU
end

#####################################

if ($help || $h || ARGV.empty?)
  usage
  exit 0
end

$change ||= $c

$seed ||= $s
srand($seed.to_i) if $seed

$n = ARGV.shift.to_i

def choice(a)
  a[rand(a.length)]
end

#####################################

$doors = 'ABC'.split //
$n.times{
  car = choice $doors
  you = choice $doors
  goat = choice($doors - [car, you])
  you = choice($doors - [you, goat]) if $change
  result = (car == you) ? 'O' : 'X'
  puts result
}
```

得到的结果如下：

![Screenshot 2023-09-24 at 13.34.46](https://mdstore.oss-cn-beijing.aliyuncs.com/Screenshot%202023-09-24%20at%2013.34.46.png)



## 误差理论与数据处理方法

### 测量不确定度

- A类不确定度，可通过对测量结果的统计分析进行评定，并可用实验标准偏差表征，写作$u_A$
- B类不确定度，只能根据经验或其他信息进行评定，写作$u_B$
- 因为间接测量的测得值是由若干直接测量量的测得值通过一定的函数关系求出的，所以其标准不确定度应由**合成不确定度表**示

### 测量结果的表示

凡是通过实验测得的量都必须用数值、单位和测量不确定度三者来表示，有的还要注明方向，最终结果一般需要表示成下面的形式：
$$
x=\bar x\pm u_x=\bar x(1\pm E_{u_x})(单位)
$$

### 误差的表示

#### 绝对误差

总体方差、标准误差：**无限次**测量所获得的全部测得值误差的平方均值$\sigma^2$称为**总体方差**。总体方差的算术平方根称为总体**标准误差**。正态分布总体中每一个测得值的标准误差均为
$$
\sigma_{x_i}=[\sum_{i=1}^{n}\delta^2_{x_i}/n]^{1/2}=[\sum_{i=1}^{n}(x_i-a)^2/n]^{1/2}
$$
算术平均值的标准误差为$\sigma_{x_i}$的$1/\sqrt n$，即
$$
\sigma_{\bar x}=\sigma_{x_i}/\sqrt n
$$
残差：在相同条件下，对同一稳定的物理量进行**有限次**测量时所得到的$n$个测得值被称为总体的样本，每个测得值$x_i$与样本平均值$\bar x$之差为该测得值的残差或偏差，即
$$
ν_{x_i}=x_i-\bar x
$$
样本方差、标准偏差：在**有限次**测量中，以$s_{x_i}$表示一组符合正态分布的等精度测量的取样标准误差的精确估计值，称为样本标准偏差
$$
s_{x_i}=[\sum_{i=1}^n\nu^2_{x_i}/(n-1)]^{1/2}=[\sum_{i=1}^n(x_i-\bar x)^2/(n-1)]^{1/2}
$$
样本标准偏差的平方即**样本方差**，显然，样本方差是总体方差的估计值，同样，算术平均值的标准偏差也为$s_{x_i}$的$1/\sqrt n$，即
$$
s_{\bar x}=s_{x_i}/\sqrt n
$$
实际上，在实验中通常不区分$s$与$\sigma$

#### 相对误差

由于本节内容重点在概率论与统计的知识总结上，故相对误差不作过多阐述

### 随机误差的统计规律

#### 特点

随机误差有以下几个特点：

- 单峰性，绝对值小的误差比绝对值大的误差出现的次数多
- 有界性，在一定条件下的有限次测量中，其误差的绝对值不会超过一定的界限（但是要注意，像正态分布这样的分布，没有任何一个区域出现的概率是0的）
- 对称性，绝对值相等的正误差与负误差出现的次数大致相同
- 抵偿性，由随机误差的对成型可以推出：当测量次数$n\to \infty $时，有

$$
\lim _{n\to \infty}\sum_{i=1}^n\delta_i=0
$$

#### 归一化

将误差频率直方图转化为概率密度分布曲线，并使曲线下面包围的面积为1，自此，我们将离散的测量数据转变成了连续的数据
$$
P=\int_{-\infty}^\infty f(\delta)\mathrm{d}\delta=\int_{-\infty}^\infty f(x)\mathrm{d}x=1
$$

#### 正态分布及置信度

正态分布概率密度函数：
$$
f(\delta)=\frac{1}{\sigma (2\pi)^{1/2}}exp(-\delta^2/2\sigma^2)
$$
真值出现在某数据区间的概率称为**置信概率**
$$
P([a-\sigma,a+\sigma])=68.3\%\\
P([a-2\sigma,a+2\sigma])=95.4\%\\
P([a-3\sigma,a+3\sigma])=99.7\%\\
$$

#### 有限次测量的标准偏差

实际的测量总是有限次测量，在有限次测量中需要用到**贝塞尔公式**进行标准偏差的估计

当测量数量$n$为有限时，由于式$(x_1+x_2+x_3+\cdots+x_i+\cdots+x_n)/n=\bar x$或$\sum_{i=1}^n\nu_{x_i}=0$存在，对随机变量构成一个**约束条件**，所以，$n$个测得值中只有$(n-1)$个值**线性独立**，称为$(n-1)$个自由度

#### t分布

因为有限次测量的结果不遵从正态分布，而遵从**t分布**，t分布的峰值低于正态分布，，因此有限次测量的标准偏差和标准误差不同，为了达到同样的置信概率，使曲线下面包围的面积相同，就要把误差扩大些，即将标准偏差乘上t分布的**置信系数**$t_{(p,k)}$

